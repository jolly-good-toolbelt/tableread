language: python
python:
  - "3.6"

before_install:
  - sudo apt-get update
  - sudo apt-get install graphviz
  - pip install poetry

install:
  - poetry config settings.virtualenvs.in-project true
  - ./env_setup.py

cache:
  paths:
    - .venv
  key: "${CI_COMMIT_REF_SLUG}"

script:
  - ./self_check.py
  - ./bin/build_docs.py
